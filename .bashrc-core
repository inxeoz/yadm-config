#!/usr/bin/env bash

#######################################
# ~/.bashrc-core — Fast essentials
#######################################

# ---- Quick helpers ----
mark() { mkdir -p ~/.marks; ln -snf "$(pwd)" ~/.marks/"$1"; }
goto() { cd -P "$(readlink ~/.marks/"$1")" || echo "No mark: $1"; }
marks() { ls -1 ~/.marks; }
cht() { curl -s "https://cht.sh/$*"; }

# ---- Safe PATH prepend ----
prepend_path() {
  case ":$PATH:" in
    *":$1:"*) ;;  # already present
    *) PATH="$1:$PATH" ;;
  esac
}

# ---- PATH setup ----
prepend_path "$HOME/.local/bin"
prepend_path "$HOME/.cargo/bin"
prepend_path "$HOME/.npm-global/bin"
prepend_path "$HOME/.nvm"
prepend_path "$HOME/.bun/bin"

: "${DENO_INSTALL:=$HOME/.deno}"
prepend_path "$DENO_INSTALL/bin"

export PATH DENO_INSTALL
export NVM_DIR="$HOME/.nvm"
export CAPACITOR_ANDROID_STUDIO_PATH="$HOME/.local/share/JetBrains/Toolbox/apps/android-studio/bin/studio.sh"

# ---- Locale & colors ----
export LS_COLORS="di=37:*di=*/"
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8
export LC_ALL=en_US.UTF-8

#######################################
# Aliases (fast / no subshells)
#######################################
alias '..'='cd ..'
alias ls='ls --color=auto --classify'
alias grep='grep --color=auto'

alias c='clear'
alias ui='xprop | grep WM_CLASS'
alias bat="bat --paging=never --style=plain --theme='OneHalfDark'"

alias cls='clear; ls'
alias reload='source ~/.bashrc'
alias update='sudo pacman -Syuu'

alias processes='ps aux --sort=-%cpu | head -20'

alias serve="python3 -m http.server"


#######################################
# Prompt — simple & fast
#######################################
PS1=$'\n[\u@manjaro-i3 | \[\e[33m\]\w\[\e[0m\] | \@]\$ '

#######################################
# End of ~/.bashrc-core
#######################################

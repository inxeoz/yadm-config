#!/usr/bin/env bash

#######################################
# ~/.bashrc-extra ‚Äî Optional tools & extras
#######################################


# ---- SDKMAN (must be at end) ----
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"


########################################
########################################
# ---- Optional: Notes system (per-file version) ----
NOTES_DIR="$HOME/.config/inxeoz_notes"  # <- same directory used in your addnote output

addnote() {
  mkdir -p "$NOTES_DIR"

  # Determine next note number
  local next_num=$(( $(find "$NOTES_DIR" -maxdepth 1 -type f -name '*.note' 2>/dev/null | wc -l) + 1 ))
  local note_file="$NOTES_DIR/${next_num}.note"

  # Temporary file for safe handling
  local tmp_file
  tmp_file=$(mktemp)

  if [ $# -gt 0 ]; then
    # Direct input mode: user passed text as argument(s)
    printf "%s\n" "$*" > "$tmp_file"
  else
    # Interactive mode
    echo "üìù Type your note below. Press Ctrl+D when done:"
    cat > "$tmp_file"
  fi

  # Validate content (skip empty input)
  if [ ! -s "$tmp_file" ]; then
    echo "‚ö†Ô∏è  Empty note ‚Äî nothing saved."
    rm -f "$tmp_file"
    return 1
  fi

  # Save and finalize
  mv "$tmp_file" "$note_file"
  echo "‚úÖ Note #$next_num added ‚Üí $note_file"
}



notes() {
  mkdir -p "$NOTES_DIR"
  local files=( "$NOTES_DIR"/*.note )
  if [ ! -e "${files[0]}" ]; then
    echo "üìò  No notes yet ‚Äî use 'addnote <text>' to create one."
    return
  fi
  echo -e "\nüìò  Your Notes:\n"
  for f in $(ls "$NOTES_DIR"/*.note 2>/dev/null | sort -V); do
    num=$(basename "$f" .note)
    echo "[$num] $(cat "$f")"
  done
  echo
}

delnote() {
  local num="$1"
  [ -z "$num" ] && echo "Usage: delnote <num>" && return 1
  local file="$NOTES_DIR/${num}.note"
  if [ -f "$file" ]; then
    rm -f "$file"
    echo "üóëÔ∏è  Deleted note #$num."
  else
    echo "‚ùå Note #$num not found."
  fi
}

note() {
  local num="$1"
  [ -z "$num" ] && echo "Usage: note <num>" && return 1
  local file="$NOTES_DIR/${num}.note"
  if [ ! -f "$file" ]; then
    echo "‚ùå No note #$num found."
    return 1
  fi
  local text
  text=$(cat "$file")
  printf '%s' "$text" | xclip -selection clipboard
  echo "üìã Copied note #$num to clipboard:"
  echo "   \"$text\""
}

renumber_notes() {
  local i=1
  for f in $(ls "$NOTES_DIR"/*.note 2>/dev/null | sort -V); do
    mv "$f" "$NOTES_DIR/$i.note"
    ((i++))
  done
  echo "üî¢ Notes renumbered."
}

# ---- Auto-display notes on startup ----
print_notes_on_startup() {
  if [ "$(find "$NOTES_DIR" -maxdepth 1 -type f -name '*.note' 2>/dev/null | wc -l)" -gt 0 ]; then
    notes
  else
    echo -e "\nüìò  No notes yet ‚Äî use 'addnote <text>' to create one.\n"
  fi
}

# Automatically print notes only in interactive terminals
if [[ $- == *i* ]]; then
  print_notes_on_startup
fi

########################################
########################################




xhdmi() {
    # Get the name of the first connected HDMI output
    hdmi_output=$(xrandr | awk '/HDMI-[0-9]+ connected/ {print $1; exit}')

    if [ -n "$hdmi_output" ]; then
        echo "Detected HDMI output: $hdmi_output"
        echo "Enabling $hdmi_output..."
        xrandr --output "$hdmi_output" --auto
    else
        echo "‚ö†Ô∏è  No HDMI device detected."
    fi
}



remindme() {
  local mins="$1"; shift
  (sleep "$((mins * 60))" && notify-send "‚è∞ Reminder" "$*") &
  echo "üîî Reminder set for $mins minute(s): $*"
}


scp_transfer() {
  read -p "Remote IP: " ip
  read -p "Username: " user
  read -p "Remote file path: " src
  read -p "Local destination (path/filename): " dest
  scp "$user@$ip:$src" "$dest"
}



#######################################
# End of ~/.bashrc-extra
#######################################

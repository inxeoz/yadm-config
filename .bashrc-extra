#!/usr/bin/env bash

#######################################
# ~/.bashrc-extra â€” Optional tools & extras
#######################################


# ---- SDKMAN (must be at end) ----
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"


########################################
# ---- Optional: Notes system (optimized) ----
########################################

NOTES_DIR="$HOME/.config/inxeoz_notes"

# Create the notes directory if missing
mkdir -p "$NOTES_DIR"

# ---- Add a new note (interactive or direct input) ----
addnote() {
  local next_num note_file tmp_file
  next_num=$(( $(find "$NOTES_DIR" -maxdepth 1 -type f -name '*.note' 2>/dev/null | wc -l) + 1 ))
  note_file="$NOTES_DIR/${next_num}.note"
  tmp_file=$(mktemp)

  if (( $# )); then
    printf '%s\n' "$*" > "$tmp_file"
  else
    echo "ğŸ“ Type your note below. Press Ctrl+D when done:"
    cat > "$tmp_file"
  fi

  if [[ ! -s "$tmp_file" ]]; then
    echo "âš ï¸  Empty note â€” nothing saved."
    rm -f "$tmp_file"
    return 1
  fi

  mv "$tmp_file" "$note_file"
  echo "âœ… Note #$next_num added â†’ $note_file"
}

# ---- List all notes ----
notes() {
  local files=("$NOTES_DIR"/*.note)
  if [[ ! -e ${files[0]} ]]; then
    echo "ğŸ“˜  No notes yet â€” use 'addnote <text>' to create one."
    return
  fi

  echo -e "\nğŸ“˜  Your Notes:\n"
  for f in "$NOTES_DIR"/*.note; do
    [[ -e $f ]] || continue
    printf '[%s] %s\n' "$(basename "$f" .note)" "$(cat "$f")"
  done
  echo
}

# ---- Delete a note ----
delnote() {
  local num="$1" file="$NOTES_DIR/${1}.note"
  [[ -z $num ]] && { echo "Usage: delnote <num>"; return 1; }
  [[ -f $file ]] && { rm -f "$file"; echo "ğŸ—‘ï¸  Deleted note #$num."; } || echo "âŒ Note #$num not found."
}

# ---- Copy a note to clipboard ----
note() {
  local num="$1" file="$NOTES_DIR/${1}.note"
  [[ -z $num ]] && { echo "Usage: note <num>"; return 1; }
  [[ -f $file ]] || { echo "âŒ No note #$num found."; return 1; }

  xclip -selection clipboard < "$file"
  echo "ğŸ“‹ Copied note #$num to clipboard:"
  sed 's/^/   /' "$file"
}

# ---- Renumber all notes sequentially ----
renumber_notes() {
  local i=1
  for f in $(ls "$NOTES_DIR"/*.note 2>/dev/null | sort -V); do
    mv "$f" "$NOTES_DIR/$((i++)).note"
  done
  echo "ğŸ”¢ Notes renumbered."
}

# ---- Auto-display notes on startup ----
print_notes_on_startup() {
  if find "$NOTES_DIR" -maxdepth 1 -type f -name '*.note' -print -quit | grep -q .; then
    notes
  else
    echo -e "\nğŸ“˜  No notes yet â€” use 'addnote <text>' to create one.\n"
  fi
}

# ---- Display notes only in interactive shells ----
[[ $- == *i* ]] && print_notes_on_startup
########################################
########################################





xhdmi() {
    # Get the name of the first connected HDMI output
    hdmi_output=$(xrandr | awk '/HDMI-[0-9]+ connected/ {print $1; exit}')

    if [ -n "$hdmi_output" ]; then
        echo "Detected HDMI output: $hdmi_output"
        echo "Enabling $hdmi_output..."
        xrandr --output "$hdmi_output" --auto
    else
        echo "âš ï¸  No HDMI device detected."
    fi
}



remindme() {
  local mins="$1"; shift
  (sleep "$((mins * 60))" && notify-send "â° Reminder" "$*") &
  echo "ğŸ”” Reminder set for $mins minute(s): $*"
}


scp_transfer() {
  read -p "Remote IP: " ip
  read -p "Username: " user
  read -p "Remote file path: " src
  read -p "Local destination (path/filename): " dest
  scp "$user@$ip:$src" "$dest"
}



#######################################
# End of ~/.bashrc-extra
#######################################
